CREATE DATABASE onlineshop;

USE onlineshop;

CREATE TABLE usuarios (
	usuario VARCHAR(6) PRIMARY KEY,
	nombre VARCHAR(25),
	apellido VARCHAR(20),
	password VARCHAR(8)	
);
	
CREATE TABLE suppliers (
	usuario VARCHAR(6) PRIMARY KEY,
	nif VARCHAR(9) UNIQUE,
	FOREIGN KEY(usuario) REFERENCES usuarios(usuario)
);

CREATE TABLE clients (
	usuario VARCHAR(6) PRIMARY KEY,
	dni VARCHAR(9) UNIQUE,
	city varchar(30),
	balance FLOAT,
	discount FLOAT,
	FOREIGN KEY(usuario) REFERENCES usuarios(usuario)
);

CREATE TABLE products(     
	cod_prod VARCHAR(5) PRIMARY KEY,
	nombre VARCHAR(30),
	price FLOAT,
	supplier VARCHAR(9),
	stock INT,
	FOREIGN KEY(supplier) REFERENCES suppliers(nif)
);

CREATE TABLE shopping(         
sh_num INTEGER PRIMARY KEY,
fecha DATE,
client VARCHAR(6),
FOREIGN KEY (client) REFERENCES clients(usuario)
);

CREATE TABLE shopping_lines(        
sh_num INTEGER,
line_num INTEGER,
cod_prod VARCHAR(5),
quantity INTEGER,
PRIMARY KEY(sh_num,line_num),
UNIQUE (sh_num,cod_prod),
FOREIGN KEY(sh_num) REFERENCES shopping(sh_num),
FOREIGN KEY(cod_prod) REFERENCES products(cod_prod)
);

INSERT INTO usuarios VALUES ('JUAPAS','JUAN JOSE','PASCUAL','jK1kL3fI');
INSERT INTO usuarios VALUES ('FRASUA','FRANCISCO','SUAREZ','gQ2lK1mB');
INSERT INTO usuarios VALUES ('ANANAV','ANA','NAVARRO','gQmGgDlL');
INSERT INTO usuarios VALUES ('JUALOR','JUAN ANTONIO','LORENZO','bFlCcCqO');
INSERT INTO usuarios VALUES ('CARGAL','CARMEN','GALLEGO','fqifbdof');
INSERT INTO usuarios VALUES ('JOSSAN','JOSE','SANTANA','vF3lK5bE');
INSERT INTO usuarios VALUES ('JESMEN','JESUS','MENDEZ','oD1nD1cH');
INSERT INTO usuarios VALUES ('ALBFRA','ALBERTO','FRANCO','gbhedbdk');
INSERT INTO usuarios VALUES ('IREBLA','IRENE','BLANCO','khldcmeg');
INSERT INTO usuarios VALUES ('LUIPAR','LUIS','PARRA','fG2hB7bC');
INSERT INTO usuarios VALUES ('DOLGAR','DOLORES','GARCIA','33321332');
INSERT INTO usuarios VALUES ('MANGUE','MANUEL','GUERRERO','abcdefgh');
INSERT INTO usuarios VALUES ('LUCHER','LUCIA','HERRERA','abcdefgh');
INSERT INTO usuarios VALUES ('ADRRED','ADRIAN','REDONDO','dR6dC1mC');
INSERT INTO usuarios VALUES ('ROSIBA','ROSARIO','IBAÃ‘EZ','26330456');

INSERT INTO suppliers VALUES ('CARGAL','Q7182500D');
INSERT INTO suppliers VALUES ('LUIPAR','F79619276');
INSERT INTO suppliers VALUES ('MANGUE','S6747501B');
INSERT INTO suppliers VALUES ('ALBFRA','Q0967859J');
INSERT INTO suppliers VALUES ('LUCHER','B47844808');

INSERT INTO clients VALUES ('JUAPAS','31647113X','Paterna',1000,0);
INSERT INTO clients VALUES ('FRASUA','81666058G','Valencia',500,0);
INSERT INTO clients VALUES ('ANANAV','89939657C','Alzira',700,0);
INSERT INTO clients VALUES ('JUALOR','13410741Q','Valencia',600,0);
INSERT INTO clients VALUES ('JOSSAN','45393627E','Alicante',350,0);
INSERT INTO clients VALUES ('JESMEN','81255212F','Elche',820,0);
INSERT INTO clients VALUES ('IREBLA','90227369W','Alicante',110,0);
INSERT INTO clients VALUES ('DOLGAR','26330456X','Valencia',1222,0);
INSERT INTO clients VALUES ('ADRRED','01744939K','Castellon',876,0);
INSERT INTO clients VALUES ('ROSIBA','00097347B','Valencia',55,0);

INSERT INTO products VALUES ('LU001','Blue 1TB 7200 RPM',39.95,'B47844808',50);
INSERT INTO products VALUES ('LU002','Blue 1TB 5400 RPM',43.95,'B47844808',43);
INSERT INTO products VALUES ('LU003','Barracuda 2TB 7.2K RPM',55.95,'B47844808',64);
INSERT INTO products VALUES ('CA001','DT50 16GB USB 3.0',5.95,'Q7182500D',18);
INSERT INTO products VALUES ('LU004' ,'Blue 2TB 5400RPM',61.95,'B47844808',24);
INSERT INTO products VALUES ('CA002','DT50 64GB USB 3.0',14.95,'Q7182500D',2);
INSERT INTO products VALUES ('CA003','DT50 128GB USB 3.0',21.95,'Q7182500D',15);
INSERT INTO products VALUES ('LP001','MicroSDHC 32GB Cl10',7.95,'F79619276',29);
INSERT INTO products VALUES ('LU005' ,'Barracuda 3TB 7.2K RPM Recert',75.95,'B47844808',47);
INSERT INTO products VALUES ('CA004','Attache 256GB USB 3.0',33.95,'Q7182500D',12);
INSERT INTO products VALUES ('LU006' ,'Barracuda 3TB 5400RPM',83.95,'B47844808',72);
INSERT INTO products VALUES ('LP002','MicroSDHC 128GB Cl10',18.95,'F79619276',18);
INSERT INTO products VALUES ('MA001','MW1 640P WebCam',16.95,'S6747501B',125);
INSERT INTO products VALUES ('MA002','Cam Sync HD 720p',19.95,'S6747501B',237);
INSERT INTO products VALUES ('MA003','WideCam F100 FHD 30FPS H.264',36.95,'S6747501B',104);
INSERT INTO products VALUES ('MA004','Action Cam 1080P 170 LCD',45.95,'S6747501B',187);

INSERT INTO shopping VALUES (1,'2018-09-17','JUAPAS');
INSERT INTO shopping VALUES (2,'2019-06-13','FRASUA');
INSERT INTO shopping VALUES (3,'2019-09-12','ANANAV');
INSERT INTO shopping VALUES (4,'2019-11-16','JUALOR');
INSERT INTO shopping VALUES (5,'2019-11-26','JUALOR');
INSERT INTO shopping VALUES (6,'2019-12-21','JOSSAN');
INSERT INTO shopping VALUES (7,'2019-12-21','FRASUA');
INSERT INTO shopping VALUES (8,'2019-12-23','IREBLA');
INSERT INTO shopping VALUES (9,'2020-01-09','ANANAV');
INSERT INTO shopping VALUES (10,'2020-04-02','ADRRED');
INSERT INTO shopping VALUES (11,'2020-08-18','JUALOR');
INSERT INTO shopping VALUES (12,'2020-09-10','JESMEN');
INSERT INTO shopping VALUES (13,'2020-11-29','ANANAV');
INSERT INTO shopping VALUES (14,'2020-12-06','DOLGAR');

INSERT INTO shopping_lines VALUES (1,1,'LU004',1);
INSERT INTO shopping_lines VALUES (2,1,'CA001',1);
INSERT INTO shopping_lines VALUES (3,1,'LU001',1);
INSERT INTO shopping_lines VALUES (4,1,'CA002',2);
INSERT INTO shopping_lines VALUES (5,1,'LU001',1);
INSERT INTO shopping_lines VALUES (6,1,'LU003',2);
INSERT INTO shopping_lines VALUES (6,2,'CA001',1);
INSERT INTO shopping_lines VALUES (7,1,'LP001' ,3);
INSERT INTO shopping_lines VALUES (8,1,'CA002',2);
INSERT INTO shopping_lines VALUES (8,2,'MA001' ,1);
INSERT INTO shopping_lines VALUES (8,3,'LU004',3);
INSERT INTO shopping_lines VALUES (9,1,'LU005',5);
INSERT INTO shopping_lines VALUES (10,1,'MA002' ,3);
INSERT INTO shopping_lines VALUES (10,2,'CA001',1);
INSERT INTO shopping_lines VALUES (11,1,'MA004' ,3);
INSERT INTO shopping_lines VALUES (12,1,'MA002' ,3);
INSERT INTO shopping_lines VALUES (12,2,'LP001' ,5);
INSERT INTO shopping_lines VALUES (12,3,'CA003',2);
INSERT INTO shopping_lines VALUES (12,4,'LU003',4);
INSERT INTO shopping_lines VALUES (13,1,'CA004',1);
INSERT INTO shopping_lines VALUES (14,1,'CA004',2);
INSERT INTO shopping_lines VALUES (14,2,'LU003',3);


CREATE USER 'JUAPAS'@'localhost' IDENTIFIED BY 'jK1kL3fI';
GRANT ALL PRIVILEGES ON * . * TO 'JUAPAS'@'localhost';
FLUSH PRIVILEGES;

CREATE USER 'CARGAL'@'localhost' IDENTIFIED BY 'fqifbdof';
GRANT ALL PRIVILEGES ON * . * TO 'CARGAL'@'localhost';
FLUSH PRIVILEGES;